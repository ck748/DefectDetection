{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport * as echarts from 'echarts';\nimport axios from \"axios\";\nimport moment from 'moment';\nexport default {\n  data() {\n    return {\n      dateRange: [],\n      dateL: null,\n      dateR: null,\n      pickerOptions: {\n        shortcuts: [{\n          text: '最近一周',\n          onClick(picker) {\n            const end = moment().endOf('day');\n            const start = moment(end).subtract(1, 'week').startOf('day');\n            picker.$emit('pick', [start, end]);\n          }\n        }, {\n          text: '最近一月',\n          onClick(picker) {\n            const end = moment().endOf('day');\n            const start = moment(end).subtract(1, 'month').startOf('day');\n            picker.$emit('pick', [start, end]);\n          }\n        }, {\n          text: '最近一年',\n          onClick(picker) {\n            const end = moment().endOf('day');\n            const start = moment(end).subtract(1, 'year').startOf('day');\n            picker.$emit('pick', [start, end]);\n          }\n        }],\n        disabledDate(time) {\n          return time.getTime() > Date.now(); // 禁止选择未来日期\n        }\n      },\n      charts: [],\n      // 只保留4个图表ID\n      chartIds: ['chart1', 'chart2', 'chart3', 'chart4'],\n      N: null,\n      startTime: '',\n      endTime: '',\n      order: '',\n      lastRefreshTime: '--'\n    };\n  },\n  computed: {\n    isBothInputsFilled() {\n      return this.startTime !== '' && this.endTime !== '';\n    }\n  },\n  mounted() {\n    this.fetchChartsData();\n    this.updateRefreshTime();\n  },\n  methods: {\n    updateRefreshTime() {\n      this.lastRefreshTime = moment().format('YYYY-MM-DD HH:mm:ss');\n    },\n    getChartTitle(index) {\n      if (this.charts[index]) {\n        return this.charts[index].name;\n      }\n      return `图表 ${index + 1}`;\n    },\n    setN() {\n      axios.put(\"api/detectInfo/charts/set\", null, {\n        params: {\n          N: this.N,\n          order: this.order\n        }\n      }).then(response => {\n        if (response.data.code === 200) {\n          this.charts = response.data.data;\n          this.renderCharts();\n          this.$message.success(\"N设置成功\");\n        } else {\n          this.$message.error(\"N设置失败\");\n        }\n      }).catch(error => {\n        this.$message.error(\"N设置失败\");\n      });\n    },\n    setOrder() {\n      axios.put(\"api/detectInfo/charts/set\", null, {\n        params: {\n          N: this.N,\n          order: this.order\n        }\n      }).then(response => {\n        if (response.data.code === 200) {\n          this.charts = response.data.data;\n          this.renderCharts();\n          this.$message.success(\"工单号设置成功\");\n        } else {\n          this.$message.error(\"工单号设置失败\");\n        }\n      }).catch(error => {\n        this.$message.error(\"工单号设置失败\");\n      });\n    },\n    maintime() {\n      console.log(\"这里是时间段哦\", this.dateRange);\n      let startTime = new Date(this.dateRange[0]);\n      let endTime = new Date(this.dateRange[1]);\n      startTime.setHours(23, 59, 59, 999);\n      endTime.setHours(23, 59, 59, 999);\n      this.dateL = startTime.getTime();\n      this.dateR = endTime.getTime();\n      console.log(\"开始时间的时间戳：\", this.dateL);\n      console.log(\"结束时间的时间戳：\", this.dateR);\n      axios.put(\"api/detectInfo/charts/set\").then(response => {\n        if (response.data.code === 200) {\n          this.$message.success(\"时间段设置成功\");\n        } else {\n          this.$message.error(\"时间段设置失败\");\n        }\n      }).catch(error => {\n        this.$message.error(\"时间段设置失败\");\n      });\n    },\n    fetchChartsData() {\n      fetch('api/detectInfo/charts/load').then(response => {\n        if (response.status === 200) {\n          return response.json();\n        } else {\n          throw new Error('状态码非200，无法获取数据');\n        }\n      }).then(data => {\n        this.charts = data.data;\n        // 如果数据多于4个，只取前4个\n        if (this.charts.length > 4) {\n          this.charts = this.charts.slice(0, 4);\n        }\n        this.renderCharts();\n        this.updateRefreshTime();\n        this.$message({\n          message: '查询到报表信息',\n          type: 'success'\n        });\n      }).catch(error => {\n        console.error(error);\n        this.$message({\n          message: '未能查询到报表信息',\n          type: 'error'\n        });\n      });\n    },\n    refresh() {\n      this.fetchChartsData();\n    },\n    renderCharts() {\n      // 销毁现有图表实例\n      this.charts.forEach((chart, index) => {\n        const chartDom = document.getElementById(this.chartIds[index]);\n        if (chartDom) {\n          const existingChart = echarts.getInstanceByDom(chartDom);\n          if (existingChart) {\n            existingChart.dispose();\n          }\n        }\n      });\n\n      // 渲染新图表\n      for (let i = 0; i < this.charts.length; i++) {\n        this.renderChart(this.charts[i], this.chartIds[i]);\n      }\n    },\n    renderChart(chart, containerId) {\n      const chartDom = document.getElementById(containerId);\n      if (!chartDom) return;\n      const myChart = echarts.init(chartDom);\n      let option = {};\n      switch (chart.type) {\n        case '折线图':\n          option = this.createLineOption(chart);\n          break;\n        case '柱状图':\n          option = this.createBarOption(chart);\n          break;\n        case '环形图':\n          option = this.createPieOption(chart);\n          break;\n        case '热力图':\n          option = this.createHeatmapOption(chart);\n          break;\n      }\n\n      // 添加导出配置选项\n      option.toolbox = {\n        feature: {\n          saveAsImage: {\n            title: '保存为图片',\n            pixelRatio: 2\n          },\n          dataView: {\n            title: '数据视图',\n            readOnly: true\n          }\n        },\n        right: 10,\n        top: 10\n      };\n      myChart.setOption(option);\n\n      // 响应窗口大小变化\n      window.addEventListener('resize', () => {\n        myChart.resize();\n      });\n    },\n    createLineOption(chart) {\n      const xAxisData = [];\n      const seriesData = [];\n      for (const key in chart.source) {\n        if (chart.source.hasOwnProperty(key)) {\n          xAxisData.push(key);\n          seriesData.push(chart.source[key]);\n        }\n      }\n      return {\n        title: {\n          text: chart.name,\n          left: 'center',\n          textStyle: {\n            fontSize: 14,\n            fontWeight: 'normal'\n          }\n        },\n        grid: {\n          left: '3%',\n          right: '4%',\n          bottom: '10%',\n          top: '15%',\n          containLabel: true\n        },\n        xAxis: {\n          type: 'category',\n          data: xAxisData,\n          axisLine: {\n            lineStyle: {\n              color: '#e0e0e0'\n            }\n          }\n        },\n        yAxis: {\n          type: 'value',\n          axisLine: {\n            lineStyle: {\n              color: '#e0e0e0'\n            }\n          },\n          splitLine: {\n            lineStyle: {\n              color: '#f5f5f5'\n            }\n          }\n        },\n        tooltip: {\n          trigger: 'axis',\n          formatter: function (params) {\n            return `${params[0].name}: ${params[0].value}`;\n          }\n        },\n        series: [{\n          type: 'line',\n          data: seriesData,\n          smooth: true,\n          lineStyle: {\n            color: '#5470c6',\n            width: 3\n          },\n          itemStyle: {\n            color: '#5470c6'\n          },\n          areaStyle: {\n            color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\n              offset: 0,\n              color: 'rgba(84, 112, 198, 0.3)'\n            }, {\n              offset: 1,\n              color: 'rgba(84, 112, 198, 0.1)'\n            }])\n          }\n        }]\n      };\n    },\n    createBarOption(chart) {\n      const xAxisData = [];\n      const seriesData = [];\n      for (const key in chart.source) {\n        if (chart.source.hasOwnProperty(key)) {\n          xAxisData.push(key);\n          seriesData.push(chart.source[key]);\n        }\n      }\n      return {\n        title: {\n          text: chart.name,\n          left: 'center',\n          textStyle: {\n            fontSize: 14,\n            fontWeight: 'normal'\n          }\n        },\n        grid: {\n          left: '3%',\n          right: '4%',\n          bottom: '10%',\n          top: '15%',\n          containLabel: true\n        },\n        xAxis: {\n          type: 'category',\n          data: xAxisData,\n          axisLine: {\n            lineStyle: {\n              color: '#e0e0e0'\n            }\n          },\n          axisLabel: {\n            interval: 0,\n            rotate: xAxisData.length > 5 ? 30 : 0\n          }\n        },\n        yAxis: {\n          type: 'value',\n          axisLine: {\n            lineStyle: {\n              color: '#e0e0e0'\n            }\n          },\n          splitLine: {\n            lineStyle: {\n              color: '#f5f5f5'\n            }\n          }\n        },\n        tooltip: {\n          trigger: 'axis',\n          formatter: function (params) {\n            return `${params[0].name}: ${params[0].value}`;\n          }\n        },\n        series: [{\n          type: 'bar',\n          data: seriesData,\n          itemStyle: {\n            color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\n              offset: 0,\n              color: '#83bff6'\n            }, {\n              offset: 0.5,\n              color: '#188df0'\n            }, {\n              offset: 1,\n              color: '#188df0'\n            }])\n          },\n          emphasis: {\n            itemStyle: {\n              color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\n                offset: 0,\n                color: '#2378f7'\n              }, {\n                offset: 0.7,\n                color: '#2378f7'\n              }, {\n                offset: 1,\n                color: '#83bff6'\n              }])\n            }\n          }\n        }]\n      };\n    },\n    createPieOption(chart) {\n      const legendData = Object.keys(chart.source);\n      const seriesData = [];\n      for (const key in chart.source) {\n        if (chart.source.hasOwnProperty(key)) {\n          seriesData.push({\n            name: key,\n            value: chart.source[key]\n          });\n        }\n      }\n      return {\n        title: {\n          text: chart.name,\n          left: 'center',\n          textStyle: {\n            fontSize: 14,\n            fontWeight: 'normal'\n          }\n        },\n        legend: {\n          data: legendData,\n          top: '10%',\n          type: 'scroll'\n        },\n        tooltip: {\n          trigger: 'item',\n          formatter: '{b}: {c} ({d}%)'\n        },\n        series: [{\n          type: 'pie',\n          radius: ['40%', '70%'],\n          // 环形图，内半径40%，外半径70%\n          center: ['50%', '60%'],\n          data: seriesData,\n          emphasis: {\n            itemStyle: {\n              shadowBlur: 10,\n              shadowOffsetX: 0,\n              shadowColor: 'rgba(0, 0, 0, 0.5)'\n            }\n          },\n          label: {\n            formatter: '{b}: {d}%'\n          },\n          // 添加环形图样式\n          itemStyle: {\n            borderWidth: 2,\n            borderColor: '#fff'\n          }\n        }]\n      };\n    },\n    createHeatmapOption(chart) {\n      return {\n        title: {\n          text: chart.name,\n          left: 'center',\n          textStyle: {\n            fontSize: 14,\n            fontWeight: 'normal'\n          }\n        },\n        tooltip: {\n          position: 'top'\n        },\n        xAxis: {\n          type: 'category',\n          data: chart.source.xAxisData,\n          axisLine: {\n            lineStyle: {\n              color: '#e0e0e0'\n            }\n          }\n        },\n        yAxis: {\n          type: 'category',\n          data: chart.source.yAxisData,\n          axisLine: {\n            lineStyle: {\n              color: '#e0e0e0'\n            }\n          }\n        },\n        visualMap: {\n          min: 0,\n          max: 100,\n          calculable: true,\n          orient: 'horizontal',\n          left: 'center',\n          bottom: '5%',\n          padding: [10, 20],\n          inRange: {\n            color: ['#e0f3ff', '#0066cc']\n          }\n        },\n        grid: {\n          left: '3%',\n          right: '4%',\n          bottom: '15%',\n          top: '15%',\n          containLabel: true\n        },\n        series: [{\n          name: chart.name,\n          type: 'heatmap',\n          data: chart.source.seriesData,\n          label: {\n            show: true\n          },\n          emphasis: {\n            itemStyle: {\n              shadowBlur: 10,\n              shadowColor: 'rgba(0, 0, 0, 0.5)'\n            }\n          }\n        }]\n      };\n    }\n  }\n};","map":{"version":3,"names":["echarts","axios","moment","data","dateRange","dateL","dateR","pickerOptions","shortcuts","text","onClick","picker","end","endOf","start","subtract","startOf","$emit","disabledDate","time","getTime","Date","now","charts","chartIds","N","startTime","endTime","order","lastRefreshTime","computed","isBothInputsFilled","mounted","fetchChartsData","updateRefreshTime","methods","format","getChartTitle","index","name","setN","put","params","then","response","code","renderCharts","$message","success","error","catch","setOrder","maintime","console","log","setHours","fetch","status","json","Error","length","slice","message","type","refresh","forEach","chart","chartDom","document","getElementById","existingChart","getInstanceByDom","dispose","i","renderChart","containerId","myChart","init","option","createLineOption","createBarOption","createPieOption","createHeatmapOption","toolbox","feature","saveAsImage","title","pixelRatio","dataView","readOnly","right","top","setOption","window","addEventListener","resize","xAxisData","seriesData","key","source","hasOwnProperty","push","left","textStyle","fontSize","fontWeight","grid","bottom","containLabel","xAxis","axisLine","lineStyle","color","yAxis","splitLine","tooltip","trigger","formatter","value","series","smooth","width","itemStyle","areaStyle","graphic","LinearGradient","offset","axisLabel","interval","rotate","emphasis","legendData","Object","keys","legend","radius","center","shadowBlur","shadowOffsetX","shadowColor","label","borderWidth","borderColor","position","yAxisData","visualMap","min","max","calculable","orient","padding","inRange","show"],"sources":["src/components/charts.vue"],"sourcesContent":["<template>\n  <div class=\"dashboard-container\">\n    <!-- 顶部控制面板 -->\n    <div class=\"control-panel\">\n      <div class=\"control-group\">\n        <label class=\"control-label\">N值:</label>\n        <el-input \n          v-model=\"N\" \n          type=\"text\" \n          placeholder=\"请输入n的值\" \n          @blur=\"setN\" \n          class=\"control-input\"\n          size=\"small\"\n        ></el-input>\n      </div>\n      <div class=\"control-group\">\n        <label class=\"control-label\">工单号:</label>\n        <el-input \n          v-model=\"order\" \n          type=\"text\" \n          placeholder=\"请输入工单号\" \n          @blur=\"setOrder\" \n          class=\"control-input\"\n          size=\"small\"\n        ></el-input>\n      </div>\n      <div class=\"control-group\">\n        <label class=\"control-label\">时间范围:</label>\n        <el-date-picker\n          v-model=\"dateRange\"\n          type=\"daterange\"\n          range-separator=\"至\"\n          start-placeholder=\"开始日期\"\n          end-placeholder=\"结束日期\"\n          :picker-options=\"pickerOptions\"\n          @change=\"maintime\"\n          size=\"small\"\n          style=\"width: 240px;\"\n        ></el-date-picker>\n      </div>\n    </div>\n\n    <!-- 图表展示区域 - 只保留4个图表 -->\n    <div class=\"charts-grid\">\n      <div class=\"chart-row\">\n        <div class=\"chart-card\">\n          <div class=\"chart-title\">{{ getChartTitle(0) }}</div>\n          <div :id=\"chartIds[0]\" class=\"chart-container\"></div>\n        </div>\n        <div class=\"chart-card\">\n          <div class=\"chart-title\">{{ getChartTitle(1) }}</div>\n          <div :id=\"chartIds[1]\" class=\"chart-container\"></div>\n        </div>\n      </div>\n      <div class=\"chart-row\">\n        <div class=\"chart-card\">\n          <div class=\"chart-title\">{{ getChartTitle(2) }}</div>\n          <div :id=\"chartIds[2]\" class=\"chart-container\"></div>\n        </div>\n        <div class=\"chart-card\">\n          <div class=\"chart-title\">{{ getChartTitle(3) }}</div>\n          <div :id=\"chartIds[3]\" class=\"chart-container\"></div>\n        </div>\n      </div>\n    </div>\n\n    <!-- 底部信息栏 -->\n    <div class=\"footer-info\">\n      <span class=\"refresh-time\">上次刷新时间：{{ lastRefreshTime }}</span>\n      <el-button \n        @click=\"refresh\" \n        type=\"primary\" \n        size=\"small\" \n        icon=\"el-icon-refresh\"\n        class=\"refresh-btn\"\n      >刷新</el-button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport * as echarts from 'echarts';\nimport axios from \"axios\";\nimport moment from 'moment';\n\nexport default {\n  data() {\n    return {\n      dateRange: [],\n      dateL: null,\n      dateR: null,\n      pickerOptions: {\n        shortcuts: [\n          {\n            text: '最近一周',\n            onClick(picker) {\n              const end = moment().endOf('day');\n              const start = moment(end).subtract(1, 'week').startOf('day');\n              picker.$emit('pick', [start, end]);\n            }\n          },\n          {\n            text: '最近一月',\n            onClick(picker) {\n              const end = moment().endOf('day');\n              const start = moment(end).subtract(1, 'month').startOf('day');\n              picker.$emit('pick', [start, end]);\n            }\n          },\n          {\n            text: '最近一年',\n            onClick(picker) {\n              const end = moment().endOf('day');\n              const start = moment(end).subtract(1, 'year').startOf('day');\n              picker.$emit('pick', [start, end]);\n            }\n          }\n        ],\n        disabledDate(time) {\n          return time.getTime() > Date.now(); // 禁止选择未来日期\n        }\n      },\n      charts: [],\n      // 只保留4个图表ID\n      chartIds: ['chart1', 'chart2', 'chart3', 'chart4'],\n      N: null,\n      startTime: '',\n      endTime: '',\n      order: '',\n      lastRefreshTime: '--'\n    };\n  },\n  computed: {\n    isBothInputsFilled() {\n      return this.startTime !== '' && this.endTime !== '';\n    }\n  },\n  mounted() {\n    this.fetchChartsData();\n    this.updateRefreshTime();\n  },\n  methods: {\n    updateRefreshTime() {\n      this.lastRefreshTime = moment().format('YYYY-MM-DD HH:mm:ss');\n    },\n    getChartTitle(index) {\n      if (this.charts[index]) {\n        return this.charts[index].name;\n      }\n      return `图表 ${index + 1}`;\n    },\n    setN() {\n      axios.put(\"api/detectInfo/charts/set\", null, {\n        params: {\n          N: this.N,\n          order: this.order\n        }\n      })\n      .then(response => {\n        if (response.data.code === 200) {\n          this.charts = response.data.data;\n          this.renderCharts();\n          this.$message.success(\"N设置成功\");\n        } else {\n          this.$message.error(\"N设置失败\");\n        }\n      })\n      .catch(error => {\n        this.$message.error(\"N设置失败\");\n      });\n    },\n    setOrder() {\n      axios.put(\"api/detectInfo/charts/set\", null, {\n        params: {\n          N: this.N,\n          order: this.order\n        }\n      })\n      .then(response => {\n        if (response.data.code === 200) {\n          this.charts = response.data.data;\n          this.renderCharts();\n          this.$message.success(\"工单号设置成功\");\n        } else {\n          this.$message.error(\"工单号设置失败\");\n        }\n      })\n      .catch(error => {\n        this.$message.error(\"工单号设置失败\");\n      });\n    },\n    maintime() {\n      console.log(\"这里是时间段哦\", this.dateRange);\n      let startTime = new Date(this.dateRange[0]);\n      let endTime = new Date(this.dateRange[1]);\n      startTime.setHours(23, 59, 59, 999);\n      endTime.setHours(23, 59, 59, 999);\n      this.dateL = startTime.getTime();\n      this.dateR = endTime.getTime();\n      console.log(\"开始时间的时间戳：\", this.dateL);\n      console.log(\"结束时间的时间戳：\", this.dateR);\n      axios.put(\"api/detectInfo/charts/set\")\n      .then(response => {\n        if (response.data.code === 200) {\n          this.$message.success(\"时间段设置成功\");\n        } else {\n          this.$message.error(\"时间段设置失败\");\n        }\n      })\n      .catch(error => {\n        this.$message.error(\"时间段设置失败\");\n      });\n    },\n    fetchChartsData() {\n      fetch('api/detectInfo/charts/load')\n      .then(response => {\n        if (response.status === 200) {\n          return response.json();\n        } else {\n          throw new Error('状态码非200，无法获取数据');\n        }\n      })\n      .then(data => {\n        this.charts = data.data;\n        // 如果数据多于4个，只取前4个\n        if (this.charts.length > 4) {\n          this.charts = this.charts.slice(0, 4);\n        }\n        this.renderCharts();\n        this.updateRefreshTime();\n        this.$message({\n          message: '查询到报表信息',\n          type: 'success'\n        });\n      })\n      .catch(error => {\n        console.error(error);\n        this.$message({\n          message: '未能查询到报表信息',\n          type: 'error'\n        });\n      });\n    },\n    refresh() {\n      this.fetchChartsData();\n    },\n    renderCharts() {\n      // 销毁现有图表实例\n      this.charts.forEach((chart, index) => {\n        const chartDom = document.getElementById(this.chartIds[index]);\n        if (chartDom) {\n          const existingChart = echarts.getInstanceByDom(chartDom);\n          if (existingChart) {\n            existingChart.dispose();\n          }\n        }\n      });\n      \n      // 渲染新图表\n      for (let i = 0; i < this.charts.length; i++) {\n        this.renderChart(this.charts[i], this.chartIds[i]);\n      }\n    },\n    renderChart(chart, containerId) {\n      const chartDom = document.getElementById(containerId);\n      if (!chartDom) return;\n      \n      const myChart = echarts.init(chartDom);\n      let option = {};\n      switch(chart.type) {\n        case '折线图':\n          option = this.createLineOption(chart);\n          break;\n        case '柱状图':\n          option = this.createBarOption(chart);\n          break;\n        case '环形图':\n          option = this.createPieOption(chart);\n          break;\n        case '热力图':\n          option = this.createHeatmapOption(chart);\n          break;\n      }\n      \n      // 添加导出配置选项\n      option.toolbox = {\n        feature: {\n          saveAsImage: {\n            title: '保存为图片',\n            pixelRatio: 2\n          },\n          dataView: {\n            title: '数据视图',\n            readOnly: true\n          }\n        },\n        right: 10,\n        top: 10\n      };\n      \n      myChart.setOption(option);\n      \n      // 响应窗口大小变化\n      window.addEventListener('resize', () => {\n        myChart.resize();\n      });\n    },\n    createLineOption(chart) {\n      const xAxisData = [];\n      const seriesData = [];\n      for (const key in chart.source) {\n        if (chart.source.hasOwnProperty(key)) {\n          xAxisData.push(key);\n          seriesData.push(chart.source[key]);\n        }\n      }\n      \n      return {\n        title: {\n          text: chart.name,\n          left: 'center',\n          textStyle: {\n            fontSize: 14,\n            fontWeight: 'normal'\n          }\n        },\n        grid: {\n          left: '3%',\n          right: '4%',\n          bottom: '10%',\n          top: '15%',\n          containLabel: true\n        },\n        xAxis: {\n          type: 'category',\n          data: xAxisData,\n          axisLine: {\n            lineStyle: {\n              color: '#e0e0e0'\n            }\n          }\n        },\n        yAxis: {\n          type: 'value',\n          axisLine: {\n            lineStyle: {\n              color: '#e0e0e0'\n            }\n          },\n          splitLine: {\n            lineStyle: {\n              color: '#f5f5f5'\n            }\n          }\n        },\n        tooltip: {\n          trigger: 'axis',\n          formatter: function (params) {\n            return `${params[0].name}: ${params[0].value}`;\n          }\n        },\n        series: [{\n          type: 'line',\n          data: seriesData,\n          smooth: true,\n          lineStyle: {\n            color: '#5470c6',\n            width: 3\n          },\n          itemStyle: {\n            color: '#5470c6'\n          },\n          areaStyle: {\n            color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [\n              { offset: 0, color: 'rgba(84, 112, 198, 0.3)' },\n              { offset: 1, color: 'rgba(84, 112, 198, 0.1)' }\n            ])\n          }\n        }]\n      };\n    },\n    createBarOption(chart) {\n      const xAxisData = [];\n      const seriesData = [];\n      for (const key in chart.source) {\n        if (chart.source.hasOwnProperty(key)) {\n          xAxisData.push(key);\n          seriesData.push(chart.source[key]);\n        }\n      }\n\n      return {\n        title: {\n          text: chart.name,\n          left: 'center',\n          textStyle: {\n            fontSize: 14,\n            fontWeight: 'normal'\n          }\n        },\n        grid: {\n          left: '3%',\n          right: '4%',\n          bottom: '10%',\n          top: '15%',\n          containLabel: true\n        },\n        xAxis: {\n          type: 'category',\n          data: xAxisData,\n          axisLine: {\n            lineStyle: {\n              color: '#e0e0e0'\n            }\n          },\n          axisLabel: {\n            interval: 0,\n            rotate: xAxisData.length > 5 ? 30 : 0\n          }\n        },\n        yAxis: {\n          type: 'value',\n          axisLine: {\n            lineStyle: {\n              color: '#e0e0e0'\n            }\n          },\n          splitLine: {\n            lineStyle: {\n              color: '#f5f5f5'\n            }\n          }\n        },\n        tooltip: {\n          trigger: 'axis',\n          formatter: function (params) {\n            return `${params[0].name}: ${params[0].value}`;\n          }\n        },\n        series: [{\n          type: 'bar',\n          data: seriesData,\n          itemStyle: {\n            color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [\n              { offset: 0, color: '#83bff6' },\n              { offset: 0.5, color: '#188df0' },\n              { offset: 1, color: '#188df0' }\n            ])\n          },\n          emphasis: {\n            itemStyle: {\n              color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [\n                { offset: 0, color: '#2378f7' },\n                { offset: 0.7, color: '#2378f7' },\n                { offset: 1, color: '#83bff6' }\n              ])\n            }\n          }\n        }]\n      };\n    },\n    createPieOption(chart) {\n      const legendData = Object.keys(chart.source);\n      const seriesData = [];\n      for (const key in chart.source) {\n        if (chart.source.hasOwnProperty(key)) {\n          seriesData.push({ name: key, value: chart.source[key] });\n        }\n      }\n\n      return {\n        title: {\n          text: chart.name,\n          left: 'center',\n          textStyle: {\n            fontSize: 14,\n            fontWeight: 'normal'\n          }\n        },\n        legend: {\n          data: legendData,\n          top: '10%',\n          type: 'scroll'\n        },\n        tooltip: {\n          trigger: 'item',\n          formatter: '{b}: {c} ({d}%)'\n        },\n        series: [{\n          type: 'pie',\n          radius: ['40%', '70%'], // 环形图，内半径40%，外半径70%\n          center: ['50%', '60%'],\n          data: seriesData,\n          emphasis: {\n            itemStyle: {\n              shadowBlur: 10,\n              shadowOffsetX: 0,\n              shadowColor: 'rgba(0, 0, 0, 0.5)',\n            }\n          },\n          label: {\n            formatter: '{b}: {d}%'\n          },\n          // 添加环形图样式\n          itemStyle: {\n            borderWidth: 2,\n            borderColor: '#fff'\n          }\n        }]\n      };\n    },\n    createHeatmapOption(chart) {\n      return {\n        title: {\n          text: chart.name,\n          left: 'center',\n          textStyle: {\n            fontSize: 14,\n            fontWeight: 'normal'\n          }\n        },\n        tooltip: {\n          position: 'top'\n        },\n        xAxis: {\n          type: 'category',\n          data: chart.source.xAxisData,\n          axisLine: {\n            lineStyle: {\n              color: '#e0e0e0'\n            }\n          }\n        },\n        yAxis: {\n          type: 'category',\n          data: chart.source.yAxisData,\n          axisLine: {\n            lineStyle: {\n              color: '#e0e0e0'\n            }\n          }\n        },\n        visualMap: {\n          min: 0,\n          max: 100,\n          calculable: true,\n          orient: 'horizontal',\n          left: 'center',\n          bottom: '5%',\n          padding: [10, 20],\n          inRange: {\n            color: ['#e0f3ff', '#0066cc']\n          }\n        },\n        grid: {\n          left: '3%',\n          right: '4%',\n          bottom: '15%',\n          top: '15%',\n          containLabel: true\n        },\n        series: [{\n          name: chart.name,\n          type: 'heatmap',\n          data: chart.source.seriesData,\n          label: {\n            show: true\n          },\n          emphasis: {\n            itemStyle: {\n              shadowBlur: 10,\n              shadowColor: 'rgba(0, 0, 0, 0.5)'\n            }\n          }\n        }]\n      };\n    }\n  }\n};\n</script>\n\n<style scoped>\n.dashboard-container {\n  padding: 20px;\n  background-color: #f5f7fa;\n  min-height: 100vh;\n}\n\n.control-panel {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 20px;\n  margin-bottom: 20px;\n  padding: 15px;\n  background: white;\n  border-radius: 8px;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);\n}\n\n.control-group {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.control-label {\n  font-size: 14px;\n  color: #606266;\n  white-space: nowrap;\n}\n\n.control-input {\n  width: 200px;\n}\n\n.charts-grid {\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n}\n\n.chart-row {\n  display: flex;\n  gap: 20px;\n}\n\n.chart-card {\n  flex: 1;\n  background: white;\n  border-radius: 8px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);\n  overflow: hidden;\n  transition: transform 0.3s, box-shadow 0.3s;\n}\n\n.chart-card:hover {\n  transform: translateY(-3px);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.12);\n}\n\n.chart-title {\n  padding: 12px 16px;\n  font-size: 16px;\n  font-weight: 600;\n  color: #303133;\n  border-bottom: 1px solid #ebeef5;\n  background-color: #fafafa;\n}\n\n.chart-container {\n  height: 300px;\n  width: 100%;\n}\n\n.footer-info {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-top: 20px;\n  padding: 12px 20px;\n  background: white;\n  border-radius: 8px;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);\n}\n\n.refresh-time {\n  font-size: 14px;\n  color: #909399;\n}\n\n.refresh-btn {\n  padding: 8px 16px;\n}\n\n@media (max-width: 1200px) {\n  .chart-row {\n    flex-direction: column;\n  }\n  \n  .control-panel {\n    flex-direction: column;\n    align-items: flex-start;\n  }\n}\n</style>"],"mappings":";AAiFA,YAAAA,OAAA;AACA,OAAAC,KAAA;AACA,OAAAC,MAAA;AAEA;EACAC,KAAA;IACA;MACAC,SAAA;MACAC,KAAA;MACAC,KAAA;MACAC,aAAA;QACAC,SAAA,GACA;UACAC,IAAA;UACAC,QAAAC,MAAA;YACA,MAAAC,GAAA,GAAAV,MAAA,GAAAW,KAAA;YACA,MAAAC,KAAA,GAAAZ,MAAA,CAAAU,GAAA,EAAAG,QAAA,YAAAC,OAAA;YACAL,MAAA,CAAAM,KAAA,UAAAH,KAAA,EAAAF,GAAA;UACA;QACA,GACA;UACAH,IAAA;UACAC,QAAAC,MAAA;YACA,MAAAC,GAAA,GAAAV,MAAA,GAAAW,KAAA;YACA,MAAAC,KAAA,GAAAZ,MAAA,CAAAU,GAAA,EAAAG,QAAA,aAAAC,OAAA;YACAL,MAAA,CAAAM,KAAA,UAAAH,KAAA,EAAAF,GAAA;UACA;QACA,GACA;UACAH,IAAA;UACAC,QAAAC,MAAA;YACA,MAAAC,GAAA,GAAAV,MAAA,GAAAW,KAAA;YACA,MAAAC,KAAA,GAAAZ,MAAA,CAAAU,GAAA,EAAAG,QAAA,YAAAC,OAAA;YACAL,MAAA,CAAAM,KAAA,UAAAH,KAAA,EAAAF,GAAA;UACA;QACA,EACA;QACAM,aAAAC,IAAA;UACA,OAAAA,IAAA,CAAAC,OAAA,KAAAC,IAAA,CAAAC,GAAA;QACA;MACA;MACAC,MAAA;MACA;MACAC,QAAA;MACAC,CAAA;MACAC,SAAA;MACAC,OAAA;MACAC,KAAA;MACAC,eAAA;IACA;EACA;EACAC,QAAA;IACAC,mBAAA;MACA,YAAAL,SAAA,gBAAAC,OAAA;IACA;EACA;EACAK,QAAA;IACA,KAAAC,eAAA;IACA,KAAAC,iBAAA;EACA;EACAC,OAAA;IACAD,kBAAA;MACA,KAAAL,eAAA,GAAA3B,MAAA,GAAAkC,MAAA;IACA;IACAC,cAAAC,KAAA;MACA,SAAAf,MAAA,CAAAe,KAAA;QACA,YAAAf,MAAA,CAAAe,KAAA,EAAAC,IAAA;MACA;MACA,aAAAD,KAAA;IACA;IACAE,KAAA;MACAvC,KAAA,CAAAwC,GAAA;QACAC,MAAA;UACAjB,CAAA,OAAAA,CAAA;UACAG,KAAA,OAAAA;QACA;MACA,GACAe,IAAA,CAAAC,QAAA;QACA,IAAAA,QAAA,CAAAzC,IAAA,CAAA0C,IAAA;UACA,KAAAtB,MAAA,GAAAqB,QAAA,CAAAzC,IAAA,CAAAA,IAAA;UACA,KAAA2C,YAAA;UACA,KAAAC,QAAA,CAAAC,OAAA;QACA;UACA,KAAAD,QAAA,CAAAE,KAAA;QACA;MACA,GACAC,KAAA,CAAAD,KAAA;QACA,KAAAF,QAAA,CAAAE,KAAA;MACA;IACA;IACAE,SAAA;MACAlD,KAAA,CAAAwC,GAAA;QACAC,MAAA;UACAjB,CAAA,OAAAA,CAAA;UACAG,KAAA,OAAAA;QACA;MACA,GACAe,IAAA,CAAAC,QAAA;QACA,IAAAA,QAAA,CAAAzC,IAAA,CAAA0C,IAAA;UACA,KAAAtB,MAAA,GAAAqB,QAAA,CAAAzC,IAAA,CAAAA,IAAA;UACA,KAAA2C,YAAA;UACA,KAAAC,QAAA,CAAAC,OAAA;QACA;UACA,KAAAD,QAAA,CAAAE,KAAA;QACA;MACA,GACAC,KAAA,CAAAD,KAAA;QACA,KAAAF,QAAA,CAAAE,KAAA;MACA;IACA;IACAG,SAAA;MACAC,OAAA,CAAAC,GAAA,iBAAAlD,SAAA;MACA,IAAAsB,SAAA,OAAAL,IAAA,MAAAjB,SAAA;MACA,IAAAuB,OAAA,OAAAN,IAAA,MAAAjB,SAAA;MACAsB,SAAA,CAAA6B,QAAA;MACA5B,OAAA,CAAA4B,QAAA;MACA,KAAAlD,KAAA,GAAAqB,SAAA,CAAAN,OAAA;MACA,KAAAd,KAAA,GAAAqB,OAAA,CAAAP,OAAA;MACAiC,OAAA,CAAAC,GAAA,mBAAAjD,KAAA;MACAgD,OAAA,CAAAC,GAAA,mBAAAhD,KAAA;MACAL,KAAA,CAAAwC,GAAA,8BACAE,IAAA,CAAAC,QAAA;QACA,IAAAA,QAAA,CAAAzC,IAAA,CAAA0C,IAAA;UACA,KAAAE,QAAA,CAAAC,OAAA;QACA;UACA,KAAAD,QAAA,CAAAE,KAAA;QACA;MACA,GACAC,KAAA,CAAAD,KAAA;QACA,KAAAF,QAAA,CAAAE,KAAA;MACA;IACA;IACAhB,gBAAA;MACAuB,KAAA,+BACAb,IAAA,CAAAC,QAAA;QACA,IAAAA,QAAA,CAAAa,MAAA;UACA,OAAAb,QAAA,CAAAc,IAAA;QACA;UACA,UAAAC,KAAA;QACA;MACA,GACAhB,IAAA,CAAAxC,IAAA;QACA,KAAAoB,MAAA,GAAApB,IAAA,CAAAA,IAAA;QACA;QACA,SAAAoB,MAAA,CAAAqC,MAAA;UACA,KAAArC,MAAA,QAAAA,MAAA,CAAAsC,KAAA;QACA;QACA,KAAAf,YAAA;QACA,KAAAZ,iBAAA;QACA,KAAAa,QAAA;UACAe,OAAA;UACAC,IAAA;QACA;MACA,GACAb,KAAA,CAAAD,KAAA;QACAI,OAAA,CAAAJ,KAAA,CAAAA,KAAA;QACA,KAAAF,QAAA;UACAe,OAAA;UACAC,IAAA;QACA;MACA;IACA;IACAC,QAAA;MACA,KAAA/B,eAAA;IACA;IACAa,aAAA;MACA;MACA,KAAAvB,MAAA,CAAA0C,OAAA,EAAAC,KAAA,EAAA5B,KAAA;QACA,MAAA6B,QAAA,GAAAC,QAAA,CAAAC,cAAA,MAAA7C,QAAA,CAAAc,KAAA;QACA,IAAA6B,QAAA;UACA,MAAAG,aAAA,GAAAtE,OAAA,CAAAuE,gBAAA,CAAAJ,QAAA;UACA,IAAAG,aAAA;YACAA,aAAA,CAAAE,OAAA;UACA;QACA;MACA;;MAEA;MACA,SAAAC,CAAA,MAAAA,CAAA,QAAAlD,MAAA,CAAAqC,MAAA,EAAAa,CAAA;QACA,KAAAC,WAAA,MAAAnD,MAAA,CAAAkD,CAAA,QAAAjD,QAAA,CAAAiD,CAAA;MACA;IACA;IACAC,YAAAR,KAAA,EAAAS,WAAA;MACA,MAAAR,QAAA,GAAAC,QAAA,CAAAC,cAAA,CAAAM,WAAA;MACA,KAAAR,QAAA;MAEA,MAAAS,OAAA,GAAA5E,OAAA,CAAA6E,IAAA,CAAAV,QAAA;MACA,IAAAW,MAAA;MACA,QAAAZ,KAAA,CAAAH,IAAA;QACA;UACAe,MAAA,QAAAC,gBAAA,CAAAb,KAAA;UACA;QACA;UACAY,MAAA,QAAAE,eAAA,CAAAd,KAAA;UACA;QACA;UACAY,MAAA,QAAAG,eAAA,CAAAf,KAAA;UACA;QACA;UACAY,MAAA,QAAAI,mBAAA,CAAAhB,KAAA;UACA;MACA;;MAEA;MACAY,MAAA,CAAAK,OAAA;QACAC,OAAA;UACAC,WAAA;YACAC,KAAA;YACAC,UAAA;UACA;UACAC,QAAA;YACAF,KAAA;YACAG,QAAA;UACA;QACA;QACAC,KAAA;QACAC,GAAA;MACA;MAEAf,OAAA,CAAAgB,SAAA,CAAAd,MAAA;;MAEA;MACAe,MAAA,CAAAC,gBAAA;QACAlB,OAAA,CAAAmB,MAAA;MACA;IACA;IACAhB,iBAAAb,KAAA;MACA,MAAA8B,SAAA;MACA,MAAAC,UAAA;MACA,WAAAC,GAAA,IAAAhC,KAAA,CAAAiC,MAAA;QACA,IAAAjC,KAAA,CAAAiC,MAAA,CAAAC,cAAA,CAAAF,GAAA;UACAF,SAAA,CAAAK,IAAA,CAAAH,GAAA;UACAD,UAAA,CAAAI,IAAA,CAAAnC,KAAA,CAAAiC,MAAA,CAAAD,GAAA;QACA;MACA;MAEA;QACAZ,KAAA;UACA7E,IAAA,EAAAyD,KAAA,CAAA3B,IAAA;UACA+D,IAAA;UACAC,SAAA;YACAC,QAAA;YACAC,UAAA;UACA;QACA;QACAC,IAAA;UACAJ,IAAA;UACAZ,KAAA;UACAiB,MAAA;UACAhB,GAAA;UACAiB,YAAA;QACA;QACAC,KAAA;UACA9C,IAAA;UACA5D,IAAA,EAAA6F,SAAA;UACAc,QAAA;YACAC,SAAA;cACAC,KAAA;YACA;UACA;QACA;QACAC,KAAA;UACAlD,IAAA;UACA+C,QAAA;YACAC,SAAA;cACAC,KAAA;YACA;UACA;UACAE,SAAA;YACAH,SAAA;cACAC,KAAA;YACA;UACA;QACA;QACAG,OAAA;UACAC,OAAA;UACAC,SAAA,WAAAA,CAAA3E,MAAA;YACA,UAAAA,MAAA,IAAAH,IAAA,KAAAG,MAAA,IAAA4E,KAAA;UACA;QACA;QACAC,MAAA;UACAxD,IAAA;UACA5D,IAAA,EAAA8F,UAAA;UACAuB,MAAA;UACAT,SAAA;YACAC,KAAA;YACAS,KAAA;UACA;UACAC,SAAA;YACAV,KAAA;UACA;UACAW,SAAA;YACAX,KAAA,MAAAhH,OAAA,CAAA4H,OAAA,CAAAC,cAAA,cACA;cAAAC,MAAA;cAAAd,KAAA;YAAA,GACA;cAAAc,MAAA;cAAAd,KAAA;YAAA,EACA;UACA;QACA;MACA;IACA;IACAhC,gBAAAd,KAAA;MACA,MAAA8B,SAAA;MACA,MAAAC,UAAA;MACA,WAAAC,GAAA,IAAAhC,KAAA,CAAAiC,MAAA;QACA,IAAAjC,KAAA,CAAAiC,MAAA,CAAAC,cAAA,CAAAF,GAAA;UACAF,SAAA,CAAAK,IAAA,CAAAH,GAAA;UACAD,UAAA,CAAAI,IAAA,CAAAnC,KAAA,CAAAiC,MAAA,CAAAD,GAAA;QACA;MACA;MAEA;QACAZ,KAAA;UACA7E,IAAA,EAAAyD,KAAA,CAAA3B,IAAA;UACA+D,IAAA;UACAC,SAAA;YACAC,QAAA;YACAC,UAAA;UACA;QACA;QACAC,IAAA;UACAJ,IAAA;UACAZ,KAAA;UACAiB,MAAA;UACAhB,GAAA;UACAiB,YAAA;QACA;QACAC,KAAA;UACA9C,IAAA;UACA5D,IAAA,EAAA6F,SAAA;UACAc,QAAA;YACAC,SAAA;cACAC,KAAA;YACA;UACA;UACAe,SAAA;YACAC,QAAA;YACAC,MAAA,EAAAjC,SAAA,CAAApC,MAAA;UACA;QACA;QACAqD,KAAA;UACAlD,IAAA;UACA+C,QAAA;YACAC,SAAA;cACAC,KAAA;YACA;UACA;UACAE,SAAA;YACAH,SAAA;cACAC,KAAA;YACA;UACA;QACA;QACAG,OAAA;UACAC,OAAA;UACAC,SAAA,WAAAA,CAAA3E,MAAA;YACA,UAAAA,MAAA,IAAAH,IAAA,KAAAG,MAAA,IAAA4E,KAAA;UACA;QACA;QACAC,MAAA;UACAxD,IAAA;UACA5D,IAAA,EAAA8F,UAAA;UACAyB,SAAA;YACAV,KAAA,MAAAhH,OAAA,CAAA4H,OAAA,CAAAC,cAAA,cACA;cAAAC,MAAA;cAAAd,KAAA;YAAA,GACA;cAAAc,MAAA;cAAAd,KAAA;YAAA,GACA;cAAAc,MAAA;cAAAd,KAAA;YAAA,EACA;UACA;UACAkB,QAAA;YACAR,SAAA;cACAV,KAAA,MAAAhH,OAAA,CAAA4H,OAAA,CAAAC,cAAA,cACA;gBAAAC,MAAA;gBAAAd,KAAA;cAAA,GACA;gBAAAc,MAAA;gBAAAd,KAAA;cAAA,GACA;gBAAAc,MAAA;gBAAAd,KAAA;cAAA,EACA;YACA;UACA;QACA;MACA;IACA;IACA/B,gBAAAf,KAAA;MACA,MAAAiE,UAAA,GAAAC,MAAA,CAAAC,IAAA,CAAAnE,KAAA,CAAAiC,MAAA;MACA,MAAAF,UAAA;MACA,WAAAC,GAAA,IAAAhC,KAAA,CAAAiC,MAAA;QACA,IAAAjC,KAAA,CAAAiC,MAAA,CAAAC,cAAA,CAAAF,GAAA;UACAD,UAAA,CAAAI,IAAA;YAAA9D,IAAA,EAAA2D,GAAA;YAAAoB,KAAA,EAAApD,KAAA,CAAAiC,MAAA,CAAAD,GAAA;UAAA;QACA;MACA;MAEA;QACAZ,KAAA;UACA7E,IAAA,EAAAyD,KAAA,CAAA3B,IAAA;UACA+D,IAAA;UACAC,SAAA;YACAC,QAAA;YACAC,UAAA;UACA;QACA;QACA6B,MAAA;UACAnI,IAAA,EAAAgI,UAAA;UACAxC,GAAA;UACA5B,IAAA;QACA;QACAoD,OAAA;UACAC,OAAA;UACAC,SAAA;QACA;QACAE,MAAA;UACAxD,IAAA;UACAwE,MAAA;UAAA;UACAC,MAAA;UACArI,IAAA,EAAA8F,UAAA;UACAiC,QAAA;YACAR,SAAA;cACAe,UAAA;cACAC,aAAA;cACAC,WAAA;YACA;UACA;UACAC,KAAA;YACAvB,SAAA;UACA;UACA;UACAK,SAAA;YACAmB,WAAA;YACAC,WAAA;UACA;QACA;MACA;IACA;IACA5D,oBAAAhB,KAAA;MACA;QACAoB,KAAA;UACA7E,IAAA,EAAAyD,KAAA,CAAA3B,IAAA;UACA+D,IAAA;UACAC,SAAA;YACAC,QAAA;YACAC,UAAA;UACA;QACA;QACAU,OAAA;UACA4B,QAAA;QACA;QACAlC,KAAA;UACA9C,IAAA;UACA5D,IAAA,EAAA+D,KAAA,CAAAiC,MAAA,CAAAH,SAAA;UACAc,QAAA;YACAC,SAAA;cACAC,KAAA;YACA;UACA;QACA;QACAC,KAAA;UACAlD,IAAA;UACA5D,IAAA,EAAA+D,KAAA,CAAAiC,MAAA,CAAA6C,SAAA;UACAlC,QAAA;YACAC,SAAA;cACAC,KAAA;YACA;UACA;QACA;QACAiC,SAAA;UACAC,GAAA;UACAC,GAAA;UACAC,UAAA;UACAC,MAAA;UACA/C,IAAA;UACAK,MAAA;UACA2C,OAAA;UACAC,OAAA;YACAvC,KAAA;UACA;QACA;QACAN,IAAA;UACAJ,IAAA;UACAZ,KAAA;UACAiB,MAAA;UACAhB,GAAA;UACAiB,YAAA;QACA;QACAW,MAAA;UACAhF,IAAA,EAAA2B,KAAA,CAAA3B,IAAA;UACAwB,IAAA;UACA5D,IAAA,EAAA+D,KAAA,CAAAiC,MAAA,CAAAF,UAAA;UACA2C,KAAA;YACAY,IAAA;UACA;UACAtB,QAAA;YACAR,SAAA;cACAe,UAAA;cACAE,WAAA;YACA;UACA;QACA;MACA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}