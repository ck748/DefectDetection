{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport ValidCode from \"@/components/ValidCode.vue\";\nimport axios from \"axios\";\nexport default {\n  name: \"Login\",\n  components: {\n    ValidCode\n  },\n  data() {\n    // 验证码校验\n    const validateCode = (rule, value, callback) => {\n      if (value === '') {\n        callback(new Error('请输入验证码'));\n      } else if (value.toLowerCase() !== this.code) {\n        callback(new Error('验证码错误'));\n      } else {\n        callback();\n      }\n    };\n    return {\n      loading: false,\n      forgetUserForm: {},\n      forgetPassDialogVis: false,\n      code: '',\n      user: {\n        code: '',\n        account: 'admin1',\n        pwd: '123456',\n        id: 1,\n        name: 'admin',\n        phoneNumber: '123456789',\n        email: '10@qq.com'\n      },\n      rules: {\n        account: [{\n          required: true,\n          message: '请输入账号',\n          trigger: 'blur'\n        }],\n        pwd: [{\n          required: true,\n          message: '请输入密码',\n          trigger: 'blur'\n        }],\n        code: [{\n          validator: validateCode,\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n  mounted() {\n    const myDiv = document.getElementById('myDiv');\n    myDiv.style.backgroundImage = `url(${require('@/assets/背景图片1.jpg')})`;\n    localStorage.setItem('useradmin1', JSON.stringify(this.user));\n  },\n  methods: {\n    handleForgetPass() {\n      this.forgetUserForm = {};\n      this.forgetPassDialogVis = true;\n    },\n    getCode(code) {\n      this.code = code.toLowerCase();\n      console.log(\"验证码:\", this.code);\n    },\n    login() {\n      const user = this.user;\n      const account = user.account;\n      const pwd = user.pwd;\n      this.$refs['loginRef'].validate(valid => {\n        if (valid) {\n          this.loading = true;\n          console.log(\"验证码:\", this.code);\n          axios.post('api/login/in', {\n            account: account,\n            pwd: pwd\n          }).then(res => {\n            console.log(\"响应代码:\", res.data.code);\n            if (res.data.code === 200) {\n              localStorage.setItem('useradmin1', JSON.stringify(this.user));\n              this.$message.success('登录成功');\n              localStorage.setItem(\"useradmin\", JSON.stringify(res.data.data));\n              this.$router.push('/dashboard');\n            } else {\n              this.$message.error(res.data.message);\n            }\n          }).catch(error => {\n            this.$message.error('登录失败，请稍后重试');\n            console.error('登录错误:', error);\n          }).finally(() => {\n            this.loading = false;\n          });\n        } else {\n          this.$message.error(\"输入格式错误\");\n        }\n      });\n    }\n  }\n};","map":{"version":3,"names":["ValidCode","axios","name","components","data","validateCode","rule","value","callback","Error","toLowerCase","code","loading","forgetUserForm","forgetPassDialogVis","user","account","pwd","id","phoneNumber","email","rules","required","message","trigger","validator","mounted","myDiv","document","getElementById","style","backgroundImage","require","localStorage","setItem","JSON","stringify","methods","handleForgetPass","getCode","console","log","login","$refs","validate","valid","post","then","res","$message","success","$router","push","error","catch","finally"],"sources":["src/views/login.vue"],"sourcesContent":["<template>\n  <div id=\"myDiv\" class=\"login-container\">\n    <div class=\"login-wrapper\">\n      <div class=\"login-left\">\n        <div class=\"image-overlay\"></div>\n        <img src=\"../assets/123123.jpg\" alt=\"钢铁检测系统\" class=\"login-image\">\n        <div class=\"welcome-text\">\n          <h2>钢铁检测系统</h2>\n          <p>专业 · 精准 · 高效</p>\n        </div>\n      </div>\n      <div class=\"login-right\">\n        <div class=\"login-form-container\">\n          <div class=\"form-header\">\n            <h2>欢迎登录</h2>\n            <p>请输入您的账号和密码</p>\n          </div>\n          <el-form :model=\"user\" style=\"width: 100%\" :rules=\"rules\" ref=\"loginRef\">\n            <el-form-item prop=\"account\">\n              <el-input \n                prefix-icon=\"el-icon-user\" \n                size=\"medium\" \n                placeholder=\"请输入账号\" \n                v-model=\"user.account\"\n                class=\"custom-input\"\n              >\n              </el-input>\n            </el-form-item>\n            <el-form-item prop=\"pwd\">\n              <el-input \n                prefix-icon=\"el-icon-lock\" \n                size=\"medium\" \n                show-password \n                placeholder=\"请输入密码\" \n                v-model=\"user.pwd\"\n                class=\"custom-input\"\n                @keyup.enter.native=\"login\"\n              ></el-input>\n            </el-form-item>\n            <el-form-item prop=\"code\">\n              <div class=\"code-container\">\n                <el-input \n                  placeholder=\"请输入验证码\" \n                  prefix-icon=\"el-icon-circle-check\" \n                  size=\"medium\" \n                  v-model=\"user.code\"\n                  class=\"code-input\"\n                  @keyup.enter.native=\"login\"\n                ></el-input>\n                <div class=\"valid-code-wrapper\">\n                  <valid-code @update:value=\"getCode\" />\n                </div>\n              </div>\n            </el-form-item>\n            <el-form-item>\n              <el-button \n                type=\"primary\" \n                class=\"login-btn\" \n                @click=\"login\"\n                :loading=\"loading\"\n              >\n                {{ loading ? '登录中...' : '登录' }}\n              </el-button>\n            </el-form-item>\n            <div class=\"form-footer\">\n              <span class=\"forget-password\" @click=\"handleForgetPass\">忘记密码？</span>\n            </div>\n          </el-form>\n        </div>\n      </div>\n    </div>\n\n    <el-dialog \n      title=\"忘记密码\" \n      :visible.sync=\"forgetPassDialogVis\" \n      width=\"400px\"\n      center\n      class=\"forget-dialog\"\n    >\n      <div class=\"dialog-content\">\n        <i class=\"el-icon-info dialog-icon\"></i>\n        <p>请咨询系统管理员获取密码重置帮助</p>\n        <p class=\"contact-info\">联系电话：123-4567-8910</p>\n      </div>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button type=\"primary\" @click=\"forgetPassDialogVis = false\">确 定</el-button>\n      </span>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport ValidCode from \"@/components/ValidCode.vue\";\nimport axios from \"axios\";\n\nexport default {\n  name: \"Login\",\n  components: {\n    ValidCode\n  },\n  data() {\n    // 验证码校验\n    const validateCode = (rule, value, callback) => {\n      if (value === '') {\n        callback(new Error('请输入验证码'))\n      } else if (value.toLowerCase() !== this.code) {\n        callback(new Error('验证码错误'))\n      } else {\n        callback()\n      }\n    }\n\n    return {\n      loading: false,\n      forgetUserForm: {},\n      forgetPassDialogVis: false,\n      code: '',\n      user: {\n        code: '',\n        account: 'admin1',\n        pwd: '123456',\n        id: 1,\n        name: 'admin',\n        phoneNumber: '123456789',\n        email: '10@qq.com'\n      },\n      rules: {\n        account: [\n          { required: true, message: '请输入账号', trigger: 'blur' },\n        ],\n        pwd: [\n          { required: true, message: '请输入密码', trigger: 'blur' },\n        ],\n        code: [\n          { validator: validateCode, trigger: 'blur' }\n        ],\n      }\n    }\n  },\n  mounted() {\n    const myDiv = document.getElementById('myDiv');\n    myDiv.style.backgroundImage = `url(${require('@/assets/背景图片1.jpg')})`;\n    localStorage.setItem('useradmin1', JSON.stringify(this.user))\n  },\n  methods: {\n    handleForgetPass() {\n      this.forgetUserForm = {}\n      this.forgetPassDialogVis = true\n    },\n    getCode(code) {\n      this.code = code.toLowerCase();\n      console.log(\"验证码:\", this.code)\n    },\n    login() {\n      const user = this.user;\n      const account = user.account;\n      const pwd = user.pwd;\n      \n      this.$refs['loginRef'].validate((valid) => {\n        if (valid) {\n          this.loading = true;\n          console.log(\"验证码:\", this.code)\n          axios.post('api/login/in', { account: account, pwd: pwd })\n            .then(res => {\n              console.log(\"响应代码:\", res.data.code)\n              if (res.data.code === 200) {\n                localStorage.setItem('useradmin1', JSON.stringify(this.user))\n                this.$message.success('登录成功')\n                localStorage.setItem(\"useradmin\", JSON.stringify(res.data.data))\n                this.$router.push('/dashboard')\n              } else {\n                this.$message.error(res.data.message)\n              }\n            })\n            .catch(error => {\n              this.$message.error('登录失败，请稍后重试')\n              console.error('登录错误:', error)\n            })\n            .finally(() => {\n              this.loading = false;\n            })\n        } else {\n          this.$message.error(\"输入格式错误\")\n        }\n      })\n    }\n  }\n}\n</script>\n\n<style scoped>\n.login-container {\n  height: 100vh;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-size: cover;\n  background-position: center;\n  background-repeat: no-repeat;\n  position: relative;\n}\n\n.login-container::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.4);\n  backdrop-filter: blur(2px);\n}\n\n.login-wrapper {\n  display: flex;\n  width: 900px;\n  height: 550px;\n  border-radius: 20px;\n  overflow: hidden;\n  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);\n  position: relative;\n  z-index: 1;\n}\n\n/* 左侧图片区域 */\n.login-left {\n  flex: 1;\n  position: relative;\n  overflow: hidden;\n}\n\n.login-image {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n  transition: transform 0.6s ease;\n}\n\n.login-left:hover .login-image {\n  transform: scale(1.05);\n}\n\n.image-overlay {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: linear-gradient(135deg, rgba(74, 144, 226, 0.3) 0%, rgba(25, 118, 210, 0.6) 100%);\n  z-index: 1;\n}\n\n.welcome-text {\n  position: absolute;\n  bottom: 60px;\n  left: 40px;\n  color: white;\n  z-index: 2;\n  text-shadow: 0 2px 8px rgba(0, 0, 0, 0.5);\n}\n\n.welcome-text h2 {\n  font-size: 32px;\n  font-weight: 700;\n  margin-bottom: 10px;\n  background: linear-gradient(135deg, #ffffff 0%, #e3f2fd 100%);\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n}\n\n.welcome-text p {\n  font-size: 16px;\n  opacity: 0.9;\n  letter-spacing: 1px;\n}\n\n/* 右侧表单区域 */\n.login-right {\n  flex: 1;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: rgba(255, 255, 255, 0.95);\n  backdrop-filter: blur(10px);\n  padding: 40px;\n}\n\n.login-form-container {\n  width: 100%;\n  max-width: 320px;\n}\n\n.form-header {\n  text-align: center;\n  margin-bottom: 40px;\n}\n\n.form-header h2 {\n  font-size: 28px;\n  font-weight: 700;\n  color: #1a2a3a;\n  margin-bottom: 8px;\n  background: linear-gradient(135deg, #1a2a3a 0%, #4a90e2 100%);\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n}\n\n.form-header p {\n  color: #6b7280;\n  font-size: 14px;\n}\n\n/* 修复输入框样式 - 解决图标和内容重叠问题 */\n.custom-input {\n  border-radius: 10px;\n}\n\n.custom-input ::v-deep .el-input__inner {\n  border-radius: 10px;\n  border: 1px solid #e5e7eb;\n  padding: 12px 15px 12px 45px; /* 增加左侧内边距为图标留出空间 */\n  height: 48px;\n  transition: all 0.3s ease;\n  background: #f8fafc;\n  font-size: 14px;\n}\n\n.custom-input ::v-deep .el-input__inner:focus {\n  border-color: #4a90e2;\n  box-shadow: 0 0 0 3px rgba(74, 144, 226, 0.1);\n  background: #ffffff;\n}\n\n.custom-input ::v-deep .el-input__prefix {\n  left: 15px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 20px;\n}\n\n.custom-input ::v-deep .el-icon-user,\n.custom-input ::v-deep .el-icon-lock {\n  color: #6b7280;\n  font-size: 18px;\n}\n\n/* 验证码输入框单独处理 */\n.code-input {\n  flex: 1;\n}\n\n.code-input ::v-deep .el-input__inner {\n  border-radius: 10px;\n  border: 1px solid #e5e7eb;\n  padding: 12px 15px 12px 45px; /* 同样增加左侧内边距 */\n  height: 48px;\n  background: #f8fafc;\n  font-size: 14px;\n}\n\n.code-input ::v-deep .el-input__prefix {\n  left: 15px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 20px;\n}\n\n.code-input ::v-deep .el-icon-circle-check {\n  color: #6b7280;\n  font-size: 18px;\n}\n\n/* 验证码区域 */\n.code-container {\n  display: flex;\n  gap: 12px;\n  align-items: center;\n}\n\n.valid-code-wrapper {\n  flex-shrink: 0;\n  height: 48px;\n  border-radius: 10px;\n  overflow: hidden;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n}\n\n/* 登录按钮 */\n.login-btn {\n  width: 100%;\n  height: 48px;\n  border-radius: 12px;\n  font-size: 16px;\n  font-weight: 600;\n  background: linear-gradient(135deg, #4a90e2 0%, #357abd 100%);\n  border: none;\n  box-shadow: 0 4px 15px rgba(74, 144, 226, 0.3);\n  transition: all 0.3s ease;\n  margin-top: 10px;\n}\n\n.login-btn:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 6px 20px rgba(74, 144, 226, 0.4);\n}\n\n.login-btn:active {\n  transform: translateY(0);\n}\n\n/* 表单底部 */\n.form-footer {\n  text-align: center;\n  margin-top: 20px;\n}\n\n.forget-password {\n  color: #6b7280;\n  font-size: 14px;\n  cursor: pointer;\n  transition: color 0.3s ease;\n  text-decoration: none;\n}\n\n.forget-password:hover {\n  color: #4a90e2;\n  text-decoration: underline;\n}\n\n/* 忘记密码弹窗 */\n.forget-dialog ::v-deep .el-dialog {\n  border-radius: 16px;\n  overflow: hidden;\n}\n\n.forget-dialog ::v-deep .el-dialog__header {\n  background: linear-gradient(135deg, #f8fafc 0%, #e5e7eb 100%);\n  padding: 20px;\n  text-align: center;\n}\n\n.forget-dialog ::v-deep .el-dialog__title {\n  font-size: 18px;\n  font-weight: 600;\n  color: #1a2a3a;\n}\n\n.dialog-content {\n  text-align: center;\n  padding: 30px 20px;\n}\n\n.dialog-icon {\n  font-size: 48px;\n  color: #4a90e2;\n  margin-bottom: 20px;\n}\n\n.dialog-content p {\n  color: #6b7280;\n  margin-bottom: 10px;\n  line-height: 1.6;\n}\n\n.contact-info {\n  color: #1a2a3a !important;\n  font-weight: 600;\n  font-size: 16px;\n}\n\n.dialog-footer {\n  display: flex;\n  justify-content: center;\n}\n\n.forget-dialog ::v-deep .el-button {\n  padding: 12px 40px;\n  border-radius: 10px;\n}\n\n/* 响应式设计 */\n@media (max-width: 768px) {\n  .login-wrapper {\n    flex-direction: column;\n    width: 90%;\n    height: auto;\n  }\n  \n  .login-left {\n    height: 200px;\n  }\n  \n  .welcome-text {\n    bottom: 20px;\n    left: 20px;\n  }\n  \n  .welcome-text h2 {\n    font-size: 24px;\n  }\n  \n  .login-right {\n    padding: 30px 20px;\n  }\n}\n\n/* 动画效果 */\n@keyframes fadeInUp {\n  from {\n    opacity: 0;\n    transform: translateY(30px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n.login-form-container {\n  animation: fadeInUp 0.6s ease;\n}\n</style>"],"mappings":";AA4FA,OAAAA,SAAA;AACA,OAAAC,KAAA;AAEA;EACAC,IAAA;EACAC,UAAA;IACAH;EACA;EACAI,KAAA;IACA;IACA,MAAAC,YAAA,GAAAA,CAAAC,IAAA,EAAAC,KAAA,EAAAC,QAAA;MACA,IAAAD,KAAA;QACAC,QAAA,KAAAC,KAAA;MACA,WAAAF,KAAA,CAAAG,WAAA,YAAAC,IAAA;QACAH,QAAA,KAAAC,KAAA;MACA;QACAD,QAAA;MACA;IACA;IAEA;MACAI,OAAA;MACAC,cAAA;MACAC,mBAAA;MACAH,IAAA;MACAI,IAAA;QACAJ,IAAA;QACAK,OAAA;QACAC,GAAA;QACAC,EAAA;QACAhB,IAAA;QACAiB,WAAA;QACAC,KAAA;MACA;MACAC,KAAA;QACAL,OAAA,GACA;UAAAM,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,EACA;QACAP,GAAA,GACA;UAAAK,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,EACA;QACAb,IAAA,GACA;UAAAc,SAAA,EAAApB,YAAA;UAAAmB,OAAA;QAAA;MAEA;IACA;EACA;EACAE,QAAA;IACA,MAAAC,KAAA,GAAAC,QAAA,CAAAC,cAAA;IACAF,KAAA,CAAAG,KAAA,CAAAC,eAAA,UAAAC,OAAA;IACAC,YAAA,CAAAC,OAAA,eAAAC,IAAA,CAAAC,SAAA,MAAArB,IAAA;EACA;EACAsB,OAAA;IACAC,iBAAA;MACA,KAAAzB,cAAA;MACA,KAAAC,mBAAA;IACA;IACAyB,QAAA5B,IAAA;MACA,KAAAA,IAAA,GAAAA,IAAA,CAAAD,WAAA;MACA8B,OAAA,CAAAC,GAAA,cAAA9B,IAAA;IACA;IACA+B,MAAA;MACA,MAAA3B,IAAA,QAAAA,IAAA;MACA,MAAAC,OAAA,GAAAD,IAAA,CAAAC,OAAA;MACA,MAAAC,GAAA,GAAAF,IAAA,CAAAE,GAAA;MAEA,KAAA0B,KAAA,aAAAC,QAAA,CAAAC,KAAA;QACA,IAAAA,KAAA;UACA,KAAAjC,OAAA;UACA4B,OAAA,CAAAC,GAAA,cAAA9B,IAAA;UACAV,KAAA,CAAA6C,IAAA;YAAA9B,OAAA,EAAAA,OAAA;YAAAC,GAAA,EAAAA;UAAA,GACA8B,IAAA,CAAAC,GAAA;YACAR,OAAA,CAAAC,GAAA,UAAAO,GAAA,CAAA5C,IAAA,CAAAO,IAAA;YACA,IAAAqC,GAAA,CAAA5C,IAAA,CAAAO,IAAA;cACAsB,YAAA,CAAAC,OAAA,eAAAC,IAAA,CAAAC,SAAA,MAAArB,IAAA;cACA,KAAAkC,QAAA,CAAAC,OAAA;cACAjB,YAAA,CAAAC,OAAA,cAAAC,IAAA,CAAAC,SAAA,CAAAY,GAAA,CAAA5C,IAAA,CAAAA,IAAA;cACA,KAAA+C,OAAA,CAAAC,IAAA;YACA;cACA,KAAAH,QAAA,CAAAI,KAAA,CAAAL,GAAA,CAAA5C,IAAA,CAAAmB,OAAA;YACA;UACA,GACA+B,KAAA,CAAAD,KAAA;YACA,KAAAJ,QAAA,CAAAI,KAAA;YACAb,OAAA,CAAAa,KAAA,UAAAA,KAAA;UACA,GACAE,OAAA;YACA,KAAA3C,OAAA;UACA;QACA;UACA,KAAAqC,QAAA,CAAAI,KAAA;QACA;MACA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}